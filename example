#!/usr/bin/env python3
import random
import time
import sys

# ================== UI & EFFECTS ==================

RESET = "\033[0m"
BOLD = "\033[1m"

RED = "\033[31m"
GREEN = "\033[32m"
YELLOW = "\033[33m"
BLUE = "\033[34m"
MAGENTA = "\033[35m"
CYAN = "\033[36m"

def clear():
    print("\033c", end="")

def slow_print(text, speed=0.03, color=""):
    for char in text:
        sys.stdout.write(color + char + RESET)
        sys.stdout.flush()
        time.sleep(speed)
    print()

def line(char="‚îÄ", width=50):
    print(char * width)

def title(text):
    line("‚ïê")
    print(f"{BOLD}{CYAN}{text.center(50)}{RESET}")
    line("‚ïê")


# ================== GAME SETUP ==================
global cmd
def AddStat():
    global Exper, addStr, addVis, addAgl, addSpe, addInt, addMan, addEnd
    Exper = 10
    addStr = addVis = addAgl = addSpe = addInt = addMan = addEnd = 0


def NewbieStat():
    global NStrength, NVision, NAglity, NSpeed, Nintel, NMana, NEndurance
    NStrength = random.randint(1, 12)
    NVision = random.randint(1, 12)
    NAglity = random.randint(1, 12)
    NSpeed = random.randint(1, 12)
    Nintel = random.randint(1, 12)
    NMana = random.randint(1, 15)
    NEndurance = random.randint(1, 12)


def NewbieBody():
    global weight
    weight = random.randint(4, 11)


def PlayerStat():
    global PHealth, Strength, Vision, Aglity, Speed, intel, Mana, Endurance
    Strength = NStrength + addStr
    Vision = NVision + addVis
    Aglity = NAglity + addAgl
    Speed = NSpeed + addSpe
    intel = Nintel + addInt
    Mana = NMana + addMan
    Endurance = NEndurance + addEnd
    PHealth = weight + Endurance + Aglity


# ================== DISPLAY ==================

def Allstat():
    clear()
    title("CHARACTER STATS")

    print(f"‚ù§Ô∏è  Health     : {PHealth}")
    print(f"üí™ Strength   : {Strength}")
    print(f"üëÅÔ∏è  Vision     : {Vision}")
    print(f"‚ö° Aglity     : {Aglity}")
    print(f"üèÉ Speed      : {Speed}")
    print(f"üß† Intel      : {intel}")
    print(f"üîÆ Mana       : {Mana}")
    print(f"üõ°Ô∏è  Endurance  : {Endurance}")

    line()
    print(f"{YELLOW}EXP Available : {Exper}{RESET}")
    line("‚ïê")
    input("\nPress Enter to return...")


def StatusPage():
    clear()
    title("PLAYER STATUS")

    print(f"{BOLD}Name:{RESET} {Name}")
    print(f"{BOLD}Race:{RESET} {Race}")
    if SubRace:
        print(f"{BOLD}Sub-Race:{RESET} {MAGENTA}{SubRace}{RESET}")
    print(f"{BOLD}Gold:{RESET} {YELLOW}{Gold} ü™ô{RESET}")

    line()

    print(f"{GREEN}Inventory:{RESET}")
    if Inventory:
        for item in Inventory:
            print(f" ‚Ä¢ {item}")
    else:
        print(" (Empty)")

    line()

    print(f"{BLUE}Abilities:{RESET}")
    if Abilities:
        for ab in Abilities:
            print(f" ‚ú¶ {ab}")
    else:
        print(" None")

    line("‚ïê")
    input("\nPress Enter to return...")


# ================== EXP SYSTEM ==================

def StatAlo():
    global Exper, addStr, addVis, addAgl, addSpe, addInt, addMan, addEnd

    if Exper <= 0:
        slow_print("You have no EXP points.", 0.02, RED)
        return

    while True:
        try:
            points = int(input(f"EXP ({Exper}) > How many to spend: "))
            if 1 <= points <= Exper:
                break
            print("Invalid amount.")
        except ValueError:
            print("Numbers only.")

    print("""
1. Strength
2. Vision
3. Aglity
4. Speed
5. Intel
6. Mana
7. Endurance
""")

    choice = input("> ").strip()

    if choice == "1": addStr += points
    elif choice == "2": addVis += points
    elif choice == "3": addAgl += points
    elif choice == "4": addSpe += points
    elif choice == "5": addInt += points
    elif choice == "6": addMan += points
    elif choice == "7": addEnd += points
    else:
        print("Invalid choice.")
        return

    Exper -= points
    PlayerStat()
    slow_print("Stats updated successfully!", 0.02, GREEN)

# ================== EXPLORE ==================
def Explore():

    slow_print("You currently are in year 1 \n"
"To check your STATS, say 'STATS' on your command menu, to increase you stats say 'ADD' \n" \
"This will deduct Exp you have an it will be added to you Stats that you chose\n" \
" To check you Status say 'STATUS' this will show your current inventory, Ablities, attribute and your current Discription \n"\
"your race will also have some uniqe ablities or traits you can see them their \n" \
"")
    cmd = input("Now will you " \
    "")
# ================== GAME START ==================

BeastmanTypes = [
    "Vampirekin", "Werewolf", "Lizardman", "Dragonkin", "Winged Folk",
    "Harpy", "Succubus", "Incubus", "Catfolk", "Wolfkin",
    "Foxkin", "Ratfolk", "Minotaur", "Satyr", "Lamian",
    "Naga", "Gargoyle", "Batfolk", "Frogman", "Insectoid"
]

AddStat()
NewbieStat()
NewbieBody()
PlayerStat()

Gold = 100
Inventory = ["Rusty Sword", "Health Potion"]
Abilities = ["Quick Strike"]

clear()
slow_print("Welcome to Realm 5: Astroph World", 0.05, CYAN)

Name = input("\nEnter your character name: ").strip()

while True:
    Race = input("Choose race (Ork, Human, Elf, Dwarf, Beastman): ").strip().title()
    if Race in ["Ork", "Human", "Elf", "Dwarf"]:
        SubRace = None
        break
    if Race == "Beastman":
        SubRace = random.choice(BeastmanTypes)
        slow_print(f"You are a Beastman: {SubRace}", 0.03, MAGENTA)
        break
    print("Invalid race.")

slow_print("Your journey begins...", 0.04, GREEN)
print("You are",Name,"of the",Race,"tribe currently")
slow_print("Were currently in year one of the Mortal Dynasty")
slow_print("Your currently are a newborn in a unexplored world \n" \
"The god placed all the races in the of the center world \n" \
"you must uncover truth of this world while leading and building your civilization \n" \
"It might take a view generation so youll be reborn into a family of your chosen race \n"
"or even your own kids be wise and good luck much of the world is unknown")
           
# ================== MAIN LOOP ==================

while True:
    print(f"""
{CYAN}‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
 COMMANDS
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê{RESET}
 
 EXPLORE  ‚Üí Continue game
 STATUS   ‚Üí Character overview
 STATS    ‚Üí View stats
 ADD      ‚Üí Spend EXP
 END GAME ‚Üí Quit
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
""")

    cmd = input("> ").strip().upper()

    if cmd == "STATUS":
        StatusPage()
    elif cmd == "STATS":
        Allstat()
    elif cmd == "ADD":
        StatAlo()
    elif cmd == "EXPLORE":
        Explore()

    elif cmd == "END GAME":
        clear()
        slow_print("Thanks for playing, adventurer.", 0.05, GREEN)
        break
    else:
        print(f"{RED}Unknown command.{RESET}")

